(()=>{"use strict";var e={991:()=>{document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("body");if(!e)return;const t=e.dataset.page;if(!t)return;document.querySelectorAll("a[data-nav]").forEach((e=>{e.dataset.nav===t?e.classList.add("active"):e.classList.remove("active")})),(()=>{let e=0;const t=document.querySelector(".header"),o=document.querySelector(".header__bottom");t&&o&&(window.addEventListener("scroll",(function(){let t=window.pageYOffset||document.documentElement.scrollTop;0===t?(o.classList.remove("shown"),o.classList.remove("hidden")):t>e&&t>10?(o.classList.remove("shown"),o.classList.add("hidden")):t<e&&t>0&&(o.classList.remove("hidden"),o.classList.add("shown")),e=t;const n=document.querySelector(".header__user.accordion-trigger"),s=document.querySelector(".header__column-mod");if(n&&s){const c=window.matchMedia("(min-width: 769px) and (max-width: 1189px)");function r(e){e.matches?(n.addEventListener("mouseenter",(function(){s.classList.add("hover")})),n.addEventListener("mouseleave",(function(){s.classList.remove("hover")})),n.addEventListener("focus",(function(){s.classList.add("hover")})),n.addEventListener("blur",(function(){s.classList.remove("hover")}))):s.classList.remove("hover")}r(c),c.addListener(r)}})),0===window.pageYOffset?(o.classList.remove("shown"),o.classList.remove("hidden")):o.classList.add("shown"))})(),function(){const e=document.querySelector("body"),t=document.querySelector(".mob-menu-btn"),o=document.querySelector(".mob-menu__close"),n=document.querySelector(".mob-menu"),s=document.querySelector(".mob-menu__wrapper");t&&n&&(t.addEventListener("click",(function(){!n.classList.contains("active")&&n.classList.add("active"),!e.classList.contains("no-scroll")&&e.classList.add("no-scroll")})),o.addEventListener("click",(function(){n.classList.contains("active")&&n.classList.remove("active"),e.classList.contains("no-scroll")&&e.classList.remove("no-scroll")}))),s.addEventListener("click",(function(t){t.target===s&&(n.classList.contains("active")&&n.classList.remove("active"),e.classList.contains("no-scroll")&&e.classList.remove("no-scroll"))}))}();new MutationObserver((()=>{if(document.body.classList.contains("no-scroll")){const e=function(){const e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}();document.body.style.paddingRight=e+"px",document.body.style.overflow="hidden";const t=document.querySelector(".header");t&&(t.style.paddingRight=e+"px")}else{document.body.style.paddingRight="",document.body.style.overflow="";const e=document.querySelector(".header");e&&(e.style.paddingRight="")}})).observe(document.body,{attributes:!0,attributeFilter:["class"]});const o=new class{constructor(){this.overlay=document.querySelector(".popup-overlay"),this.content=this.overlay?.querySelector(".popup__content"),this.closeBtn=this.overlay?.querySelector(".popup__close"),this.overlay&&this.content&&this.closeBtn&&this.init()}init(){this.closeBtn.addEventListener("click",(()=>this.close())),this.overlay.addEventListener("click",(e=>{e.target===this.overlay&&this.close()})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&this.isOpen()&&this.close()}))}open(t){this.content.innerHTML=t,e.classList.add("no-scroll"),this.overlay.classList.add("is-open"),this.overlay.setAttribute("aria-hidden","false");const o=this.content.querySelector("button, [href], input, select, textarea");o&&o.focus()}close(){this.overlay.classList.remove("is-open"),this.overlay.setAttribute("aria-hidden","true"),document.body.classList.remove("no-scroll"),this.content.innerHTML=""}isOpen(){return this.overlay.classList.contains("is-open")}};window.popup=o,document.addEventListener("click",(function(e){const t=e.target.closest("[data-popup]");if(!t)return;e.preventDefault();const n=t.dataset.popup,s=document.getElementById("popup-template-"+n);s&&o.open(s.innerHTML)}))}))}},t={};!function o(n){var s=t[n];if(void 0!==s)return s.exports;var c=t[n]={exports:{}};return e[n](c,c.exports,o),c.exports}(991);class o{constructor(e){this.container=e,this.tabs=e.querySelectorAll(".tab"),this.contents=e.querySelectorAll(".tab-content"),this.init()}init(){this.tabs.forEach((e=>{e.addEventListener("click",(()=>this.switchTab(e)))}))}switchTab(e){this.tabs.forEach((e=>{e.classList.remove("tab--active"),e.setAttribute("aria-selected","false")})),e.classList.add("tab--active"),e.setAttribute("aria-selected","true"),this.contents.forEach((e=>{e.setAttribute("aria-hidden","true"),e.hidden=!0}));const t=e.dataset.tab,o=this.container.querySelector(`[data-content="${t}"]`);o&&(o.setAttribute("aria-hidden","false"),o.hidden=!1)}}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".checkout-form").forEach((e=>{new o(e)})),function(){const e=document.querySelectorAll(".checkout-form"),t=document.querySelector('[data-save-button="true"]'),o=document.getElementById("user-agreement");if(!e.length||!t||!o)return;const n={customer:null,delivery:null,paymentMethod:null};function s(e,t=10){if(!e)return;const o=e.getBoundingClientRect().top+window.scrollY,n=function(){const e=document.querySelector(".header");return e?e.offsetHeight:0}();window.scrollTo({top:o-n-t,behavior:"smooth"})}function c(){const e=n.customer&&n.delivery&&o.checked;t.disabled=!e}document.querySelectorAll(".checkout-form__btn").forEach((t=>{t.addEventListener("click",(function(){const t=this.closest(".checkout-form"),o=Array.from(e).indexOf(t);if(-1===o)return;const r=t.querySelector(".tab--active");if(!r)return;const i=r.dataset.tab,a=t.querySelector(`[data-content="${i}"] .checkout-form__form`);if(!a)return;if(!function(e){if(e.querySelectorAll(".error").forEach((e=>e.classList.add("hidden"))),!e.reportValidity()){const t=e.querySelector(":invalid");return t&&s(t),!1}return!0}(a))return;const d=function(e){const t={},o=new FormData(e);for(const[e,n]of o.entries())t[e]=n.trim();return t}(a);0===o?n.customer=d:1===o&&(n.delivery=d);const l=e[o+1];l&&(l.classList.remove("no-active"),s(l.querySelector(".checkout-form__title"),20)),c()}))})),o.addEventListener("change",c),t.addEventListener("click",(function(t){if(t.preventDefault(),!n.customer||!n.delivery||!o?.checked)return void alert("Пожалуйста, заполните все шаги и примите соглашение.");const s=e[2].querySelector(".tab--active");if(!s)return;n.paymentMethod=s.dataset.tab,sessionStorage.setItem("checkoutData",JSON.stringify(n));const c={sbp:"/payment/sbp.html","online-payment":"/payment/card.html",yandex:"/payment/yandex.html",manager:"/payment/manager.html"}[n.paymentMethod]||"/payment/";window.location.href=c})),e.forEach(((e,t)=>{t>0&&e.classList.add("no-active")})),c()}()}))})();